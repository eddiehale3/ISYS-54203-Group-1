<!DOCTYPE html>
<html>
<head>
  <title>Campus Event Calendar - Sign Up</title>
  <link rel="stylesheet" href="Style/style.css">  
  <style>
    /* Basic modal styles (customize these) */
    .modal {
      display: none; 
      position: fixed; 
      z-index: 1; 
      left: 0;
      top: 0;
      width: 100%; 
      height: 100%; 
      overflow: auto; 
      background-color: rgba(0,0,0,0.4); 
    }

    .modal-content {
      background-color: #fefefe;
      margin: 15% auto; 
      padding: 20px;
      border: 1px solid #888;
      width: 60%; 
    }

    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
    }

    .close:hover,
    .close:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Sign Up for Campus Events</h1>
    <p>Create a profile to personalize your event notifications.</p>

    <form action="" method="post" onsubmit="displayResult(event)">
      <label for="studentID">Student ID:*</label><br>
      <input type="text" id="studentID" name="studentID" required><br><br>

      <label for="firstName">First Name:*</label><br>
      <input type="text" id="firstName" name="firstName" required><br><br>

      <label for="lastName">Last Name:*</label><br>
      <input type="text" id="lastName" name="lastName" required><br><br>

      <label for="email">Email Address:*</label><br>
      <input type="text" id="email" name="email" required><br><br>

      <label for="major">Major/Department:</label><br>
      <input type="text" id="major" name="major"><br><br>

      <label for="year">Year of Study:</label><br>
      <input type="text" id="year" name="year"><br><br>

      <h3>Notification Preferences</h3>
      <input type="checkbox" id="allEvents" name="notifications" value="all">
      <label for="allEvents"> All campus events</label><br>

      <input type="checkbox" id="categoryEvents" name="notifications" value="category">
      <label for="categoryEvents"> Events from specific categories</label><br>

      <input type="checkbox" id="majorEvents" name="notifications" value="major">
      <label for="majorEvents"> Events from my major/department</label><br><br>

      <input type="submit" value="Create Profile" class="create-profile-link">
    </form>

    <div id="resultModal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <div id="result"> 
          <h2>Profile Summary</h2>
        </div>
      </div>
    </div>
  </div>

  <script>
    function displayResult(event) {
      event.preventDefault(); 

      const studentID = document.getElementById("studentID").value;
      const firstName = document.getElementById("firstName").value;
      const lastName = document.getElementById("lastName").value;
      const email = document.getElementById("email").value;
      let major = document.getElementById("major").value;
      let year = document.getElementById("year").value;

      let notificationPrefs = [];
      if (document.getElementById("allEvents").checked) {
        notificationPrefs.push("All campus events");
      }
      if (document.getElementById("categoryEvents").checked) {
        notificationPrefs.push("Events from specific categories");
      }
      if (document.getElementById("majorEvents").checked) {
        notificationPrefs.push("Events from my major/department");
      }

      if (major === "") {
        major = "Not provided";
      }
      if (year === "") {
        year = "Not provided";
      }

      if (notificationPrefs.length === 0) {
        notificationPrefs = ["None"]; 
      } 

      const resultDiv = document.getElementById("result");
      resultDiv.innerHTML = `
        <h2>Profile Summary</h2>
        <p><strong>Student ID:</strong> ${studentID}</p>
        <p><strong>Name:</strong> ${firstName} ${lastName}</p>
        <p><strong>Email:</strong> ${email}</p>
        <p><strong>Major/Department:</strong> ${major}</p>
        <p><strong>Year of Study:</strong> ${year}</p>
        <p><strong>Notification Preferences:</strong> ${notificationPrefs.join(", ")}</p>
        <button onclick="confirmRegistration()">Confirm Registration</button> 
      `;

      openModal();
    }

    function openModal() {
      document.getElementById("resultModal").style.display = "block";
    }

    function closeModal() {
      document.getElementById("resultModal").style.display = "none";
    }

    function confirmRegistration() {
      alert("Registration Confirmed!"); 
      // Redirect to Home.html
      window.location.href = "Home.html"; 
      closeModal();
    }
  </script>
</body>
</html>